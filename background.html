<!DOCTYPE html>
<html>
<body>
<script>
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.sendRequest(tab.id, {
        action: 'toggle',
        pageData: {
            tabId: tab.id
        } // TODO: Send saved data
    });
});

chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
    if (request.action == 'save') {
        // TODO: Save state
    } else if (request.action == 'request') {
        // TODO: Answer saved data
    }
});
</script>
</body>
</html>



